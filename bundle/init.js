"use strict";var typeTop="20px",typeLeft="0",indexCtrl={init:function(){this.slider(),this.play(),this.pieChart(),this.showAnswer(),this.setFunds(),this.kv(),this.changeBg(),this.fromFunds(),this.playBtn(),$("#kv .slide_bar").delay(200).fadeIn(400),$("#weapon .btn_green").click(function(e){e.preventDefault(),window.open("https://www.ctbcbank.com/CTCBPortalWeb/appmanager/ebank/rb?_nfpb=true&_pageLabel=TW_RB_TX_mfund_300014&_windowLabel=T16806467151337672757923&_nffvid=%2FCTCBPortalWeb%2Fpages%2Fmf%2FmfIrRegularApply%2FmfIrRegularApplyStart.faces&firstView=true","_blank")}),$("#weapon .btn_orange").click(function(e){e.preventDefault(),window.open("http://www.ctbcbank.com/html/fileUpload/homebank/openacc.html","_blank")})},fromFunds:function(){var e=$.getUrlParam("from");1==e&&null!=e&&$(".go_formula").click()},kv:function(){var e=$(".slide_bar"),t=$(".kv"),n=$(".content"),s=$(".outer.left"),i=$(window).width(),a=$(window).height(),o=.5,l=$("#kv .bar").width();s.width(i*o),e.css("left",i*o-e.width()/2+"px"),n.width(i);var r=function(e){s.css("width",e.cw),t.css("height",e.h)},c=function(e){var t=i,n=a;return{w:t+"px",h:n+"px",cw:e*t+"px",ch:e*n+"px"}},f=function(t){var n=c(t);e.css("left",t*i-e.width()/2),d(),r(n)},d=function(){var e=$("#kv .circle_01"),t=$("#kv .circle_02"),n=$("#kv .circle_03"),s=$("#kv .circle_04"),a=e.offset().left,l=t.offset().left,r=n.offset().left,c=s.offset().left;i*o>a?e.addClass("show"):e.removeClass("show"),i*o>l?t.addClass("show"):t.removeClass("show"),i*o>r?n.addClass("show"):n.removeClass("show"),i*o>c?s.addClass("show"):s.removeClass("show")},u=function(e,t,n){return Math.max(t,Math.min(n,e))},p=function(e,t){return u((e-h)/i,0,1)},h=0,w=0,v=0,m=0,g=function(e){e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY?e.preventDefault():e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&(e.distX,e.distY),t.addClass("active"),h=t.offset().left,w=t.offset().top,v=i,m=s.height()},k=function(e){t.hasClass("active")&&(o=p(e.pageX,e.pageY),f(o))},C=function(){t.removeClass("active")};e.on("movestart",g),e.on("move",k),e.on("moveend",C),e.on("touchmove",function(e){e.preventDefault()}),$(window).on("resize",function(e){i=$(window).width(),a=$(window).height(),n.width(i),l=$("#kv .bar").width(),f(o)})},changeBg:function(){var e=$(".content"),t=$(".content.left"),n=$(".content.right"),s=$("#kv .change_theme li"),i=$("#kv .active"),a=function(s){e.fadeOut(200,function(){t.css("background","url(images/theme"+s+"_01.jpg) no-repeat center top").css("backgroundSize","cover"),n.css("background","url(images/theme"+s+"_02.jpg) no-repeat center top").css("backgroundSize","cover")}).delay(200).fadeIn(400)};s.click(function(e){e.preventDefault();var t=$(this).index();typeTop=$(this).data("top"),typeLeft=$(this).data("left"),menuCtrl.chkDevice()?(i.css("top","0px"),i.stop().animate({left:typeLeft},500)):(i.css("left","0"),i.stop().animate({top:typeTop},500)),a(t)}).eq(0).click(),$(window).resize(function(){menuCtrl.chkDevice()?(i.css("top","0px"),i.css("left",typeLeft)):(i.css("top",typeTop),i.css("left","0"))})},playBtn:function(){var e=$(".go_formula");$(window).scrollTop()>90?e.addClass("show"):e.removeClass("show"),$(window).scroll(function(){$(window).scrollTop()>90?e.addClass("show"):e.removeClass("show")})},play:function(){var e=this,t=0;$("#top .indexPage li:eq(1), .go_formula").click(function(n){n.preventDefault();var s=menuCtrl.chkDevice()?$("#analysis .mb").height():0;t=e.caloffset("#analysis")+s,menuCtrl.scrollPage(t)})},setFunds:function(){var e=$("#analysis .select_wrapper");e.change(function(){var t=e.find(":selected").val();$("#result .inline li.find_item").hide(),$("."+t).show()}).change()},showAnswer:function(){var e=this,t=$("#analysis .btn_wrapper .btn_green"),n=$("#analysis .btn_wrapper .btn_white"),s=0;t.click(function(n){n.preventDefault();var i=menuCtrl.chkDevice()?$("#analysis .mb").height():0;if(t.hasClass("show"))return s=e.caloffset("#analysis")+i,menuCtrl.scrollPage(s),void $("#result").delay(300).slideUp({duration:500,complete:function(){t.removeClass("show")}});$("#result").slideDown({duration:750,complete:function(){t.addClass("show");var n=e.caloffset("#result")+i;menuCtrl.scrollPage(n)}})}),n.click(function(e){e.preventDefault(),trackWaitJump("","fund_list.html")})},slider:function(){var e=$("#slider"),t=$(".silder_wrapper font");e.slider({range:"min",value:15e3,min:0,max:3e4,step:1,create:function(){t.text($(this).slider("value"))},slide:function(e,n){t.text(n.value)},change:function(e,n){t.text(n.value)}})},pieChart:function(){var e=$("#control .go_right"),t=$("#control .pie1, #control .pie2, #control .pie3");window.sr=ScrollReveal({duration:0,origin:"left",afterReveal:function(e){$.each(t,function(e,t){$(t).addClass("instage")})}}),sr.reveal(e)},caloffset:function(e){return $(e).offset().top-parseInt($(e).css("padding-top").replace("px",""))}};$(function(){indexCtrl.init()});